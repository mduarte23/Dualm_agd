{"ast":null,"code":"import axios from 'axios';\nimport authService from './authService';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\nfunction ensureDomain() {\n  const client = authService.getCurrentClient();\n  const domain = client === null || client === void 0 ? void 0 : client.dominio;\n  if (!domain) throw new Error('Domínio não definido. Faça login novamente.');\n  return domain;\n}\nexport async function getEmpresa() {\n  const dominio = ensureDomain();\n  const res = await axios.get(`${API_BASE_URL}/empresa`, {\n    params: {\n      dominio\n    }\n  });\n  const payload = res.data || {};\n  if (!payload.success) throw new Error(payload.message || 'Erro ao carregar empresa');\n  return payload.data;\n}\nexport async function updateEmpresa(data) {\n  const dominio = ensureDomain();\n  const payload = {\n    ...data\n  };\n  // compat: se antecedencias existir, envia ambas chaves\n  if (Array.isArray(payload.antecedencias)) {\n    var _payload$antecedencia;\n    payload.antecedencia = (_payload$antecedencia = payload.antecedencias[0]) !== null && _payload$antecedencia !== void 0 ? _payload$antecedencia : undefined;\n  }\n  const res = await axios.put(`${API_BASE_URL}/empresa`, {\n    dominio,\n    ...payload\n  });\n  const responsePayload = res.data || {};\n  if (!responsePayload.success) throw new Error(responsePayload.message || 'Erro ao salvar empresa');\n  return true;\n}","map":{"version":3,"names":["axios","authService","API_BASE_URL","process","env","REACT_APP_API_URL","ensureDomain","client","getCurrentClient","domain","dominio","Error","getEmpresa","res","get","params","payload","data","success","message","updateEmpresa","Array","isArray","antecedencias","_payload$antecedencia","antecedencia","undefined","put","responsePayload"],"sources":["C:/Users/mduarte/Desktop/Projetos/Dualm_agd/site/src/services/empresaService.js"],"sourcesContent":["import axios from 'axios';\r\nimport authService from './authService';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\r\n\r\nfunction ensureDomain() {\r\n  const client = authService.getCurrentClient();\r\n  const domain = client?.dominio;\r\n  if (!domain) throw new Error('Domínio não definido. Faça login novamente.');\r\n  return domain;\r\n}\r\n\r\nexport async function getEmpresa() {\r\n  const dominio = ensureDomain();\r\n  const res = await axios.get(`${API_BASE_URL}/empresa`, { params: { dominio } });\r\n  const payload = res.data || {};\r\n  if (!payload.success) throw new Error(payload.message || 'Erro ao carregar empresa');\r\n  return payload.data;\r\n}\r\n\r\nexport async function updateEmpresa(data) {\r\n  const dominio = ensureDomain();\r\n  const payload = { ...data };\r\n  // compat: se antecedencias existir, envia ambas chaves\r\n  if (Array.isArray(payload.antecedencias)) {\r\n    payload.antecedencia = payload.antecedencias[0] ?? undefined;\r\n  }\r\n  const res = await axios.put(`${API_BASE_URL}/empresa`, { dominio, ...payload });\r\n  const responsePayload = res.data || {};\r\n  if (!responsePayload.success) throw new Error(responsePayload.message || 'Erro ao salvar empresa');\r\n  return true;\r\n}\r\n\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,eAAe;AAEvC,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,EAAE;AAExD,SAASC,YAAYA,CAAA,EAAG;EACtB,MAAMC,MAAM,GAAGN,WAAW,CAACO,gBAAgB,CAAC,CAAC;EAC7C,MAAMC,MAAM,GAAGF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,OAAO;EAC9B,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIE,KAAK,CAAC,6CAA6C,CAAC;EAC3E,OAAOF,MAAM;AACf;AAEA,OAAO,eAAeG,UAAUA,CAAA,EAAG;EACjC,MAAMF,OAAO,GAAGJ,YAAY,CAAC,CAAC;EAC9B,MAAMO,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,GAAGZ,YAAY,UAAU,EAAE;IAAEa,MAAM,EAAE;MAAEL;IAAQ;EAAE,CAAC,CAAC;EAC/E,MAAMM,OAAO,GAAGH,GAAG,CAACI,IAAI,IAAI,CAAC,CAAC;EAC9B,IAAI,CAACD,OAAO,CAACE,OAAO,EAAE,MAAM,IAAIP,KAAK,CAACK,OAAO,CAACG,OAAO,IAAI,0BAA0B,CAAC;EACpF,OAAOH,OAAO,CAACC,IAAI;AACrB;AAEA,OAAO,eAAeG,aAAaA,CAACH,IAAI,EAAE;EACxC,MAAMP,OAAO,GAAGJ,YAAY,CAAC,CAAC;EAC9B,MAAMU,OAAO,GAAG;IAAE,GAAGC;EAAK,CAAC;EAC3B;EACA,IAAII,KAAK,CAACC,OAAO,CAACN,OAAO,CAACO,aAAa,CAAC,EAAE;IAAA,IAAAC,qBAAA;IACxCR,OAAO,CAACS,YAAY,IAAAD,qBAAA,GAAGR,OAAO,CAACO,aAAa,CAAC,CAAC,CAAC,cAAAC,qBAAA,cAAAA,qBAAA,GAAIE,SAAS;EAC9D;EACA,MAAMb,GAAG,GAAG,MAAMb,KAAK,CAAC2B,GAAG,CAAC,GAAGzB,YAAY,UAAU,EAAE;IAAEQ,OAAO;IAAE,GAAGM;EAAQ,CAAC,CAAC;EAC/E,MAAMY,eAAe,GAAGf,GAAG,CAACI,IAAI,IAAI,CAAC,CAAC;EACtC,IAAI,CAACW,eAAe,CAACV,OAAO,EAAE,MAAM,IAAIP,KAAK,CAACiB,eAAe,CAACT,OAAO,IAAI,wBAAwB,CAAC;EAClG,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}