{"ast":null,"code":"import axios from 'axios';\nimport authService from './authService';\n\n// Base da API: usa proxy do CRA em dev\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\nfunction ensureDomain() {\n  const client = authService.getCurrentClient();\n  const domain = client === null || client === void 0 ? void 0 : client.dominio;\n  if (!domain) {\n    throw new Error('Domínio não definido. Faça login novamente.');\n  }\n  return domain;\n}\nasync function list() {\n  const dominio = ensureDomain();\n  const response = await axios.get(`${API_BASE_URL}/especialistas`, {\n    params: {\n      dominio\n    }\n  });\n  const payload = response.data || {};\n  if (!payload.success) {\n    throw new Error(payload.message || 'Erro ao buscar especialistas');\n  }\n  return payload.data || [];\n}\nasync function getById(id) {\n  const dominio = ensureDomain();\n  const response = await axios.get(`${API_BASE_URL}/especialistas/${id}`, {\n    params: {\n      dominio\n    }\n  });\n  const payload = response.data || {};\n  if (!payload.success) {\n    throw new Error(payload.message || 'Especialista não encontrado');\n  }\n  return payload.data;\n}\nasync function create(data) {\n  const dominio = ensureDomain();\n  const response = await axios.post(`${API_BASE_URL}/especialistas`, {\n    dominio,\n    ...data\n  });\n  const payload = response.data || {};\n  if (!payload.success) {\n    throw new Error(payload.message || 'Erro ao criar especialista');\n  }\n  return payload.data;\n}\nasync function listExpertise(idEspecialista) {\n  const dominio = ensureDomain();\n  const res = await axios.get(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades`, {\n    params: {\n      dominio\n    }\n  });\n  const payload = res.data || {};\n  if (!payload.success) throw new Error(payload.message || 'Erro ao buscar especialidades do especialista');\n  return payload.data || [];\n}\nasync function addExpertise(idEspecialista, idEspecialidade) {\n  const dominio = ensureDomain();\n  const res = await axios.post(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades`, {\n    dominio,\n    id_especialidade: idEspecialidade\n  });\n  const payload = res.data || {};\n  if (!payload.success) throw new Error(payload.message || 'Erro ao vincular especialidade');\n  return true;\n}\nasync function removeExpertise(idEspecialista, idEspecialidade) {\n  const dominio = ensureDomain();\n  const res = await axios.delete(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades/${idEspecialidade}`, {\n    params: {\n      dominio\n    }\n  });\n  const payload = res.data || {};\n  if (!payload.success) throw new Error(payload.message || 'Erro ao desvincular especialidade');\n  return true;\n}\nconst especialistasService = {\n  list,\n  getById,\n  create,\n  listExpertise,\n  addExpertise,\n  removeExpertise\n};\nexport default especialistasService;","map":{"version":3,"names":["axios","authService","API_BASE_URL","process","env","REACT_APP_API_URL","ensureDomain","client","getCurrentClient","domain","dominio","Error","list","response","get","params","payload","data","success","message","getById","id","create","post","listExpertise","idEspecialista","res","addExpertise","idEspecialidade","id_especialidade","removeExpertise","delete","especialistasService"],"sources":["C:/Users/mduarte/Desktop/Projetos/Dualm_agd/site/src/services/especialistasService.js"],"sourcesContent":["import axios from 'axios';\r\nimport authService from './authService';\r\n\r\n// Base da API: usa proxy do CRA em dev\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '';\r\n\r\nfunction ensureDomain() {\r\n  const client = authService.getCurrentClient();\r\n  const domain = client?.dominio;\r\n  if (!domain) {\r\n    throw new Error('Domínio não definido. Faça login novamente.');\r\n  }\r\n  return domain;\r\n}\r\n\r\nasync function list() {\r\n  const dominio = ensureDomain();\r\n  const response = await axios.get(`${API_BASE_URL}/especialistas`, {\r\n    params: { dominio }\r\n  });\r\n  const payload = response.data || {};\r\n  if (!payload.success) {\r\n    throw new Error(payload.message || 'Erro ao buscar especialistas');\r\n  }\r\n  return payload.data || [];\r\n}\r\n\r\nasync function getById(id) {\r\n  const dominio = ensureDomain();\r\n  const response = await axios.get(`${API_BASE_URL}/especialistas/${id}`, {\r\n    params: { dominio }\r\n  });\r\n  const payload = response.data || {};\r\n  if (!payload.success) {\r\n    throw new Error(payload.message || 'Especialista não encontrado');\r\n  }\r\n  return payload.data;\r\n}\r\n\r\nasync function create(data) {\r\n  const dominio = ensureDomain();\r\n  const response = await axios.post(`${API_BASE_URL}/especialistas`, { dominio, ...data });\r\n  const payload = response.data || {};\r\n  if (!payload.success) {\r\n    throw new Error(payload.message || 'Erro ao criar especialista');\r\n  }\r\n  return payload.data;\r\n}\r\n\r\nasync function listExpertise(idEspecialista) {\r\n  const dominio = ensureDomain();\r\n  const res = await axios.get(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades`, { params: { dominio } });\r\n  const payload = res.data || {};\r\n  if (!payload.success) throw new Error(payload.message || 'Erro ao buscar especialidades do especialista');\r\n  return payload.data || [];\r\n}\r\n\r\nasync function addExpertise(idEspecialista, idEspecialidade) {\r\n  const dominio = ensureDomain();\r\n  const res = await axios.post(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades`, { dominio, id_especialidade: idEspecialidade });\r\n  const payload = res.data || {};\r\n  if (!payload.success) throw new Error(payload.message || 'Erro ao vincular especialidade');\r\n  return true;\r\n}\r\n\r\nasync function removeExpertise(idEspecialista, idEspecialidade) {\r\n  const dominio = ensureDomain();\r\n  const res = await axios.delete(`${API_BASE_URL}/especialistas/${idEspecialista}/especialidades/${idEspecialidade}`, { params: { dominio } });\r\n  const payload = res.data || {};\r\n  if (!payload.success) throw new Error(payload.message || 'Erro ao desvincular especialidade');\r\n  return true;\r\n}\r\n\r\nconst especialistasService = { list, getById, create, listExpertise, addExpertise, removeExpertise };\r\nexport default especialistasService;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}